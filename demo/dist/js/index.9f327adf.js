(function(t){function e(e){for(var a,r,c=e[0],o=e[1],d=e[2],u=0,m=[];u<c.length;u++)r=c[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);l&&l(e);while(m.length)m.shift()();return s.push.apply(s,d||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,c=1;c<n.length;c++){var o=n[c];0!==i[o]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={index:0},s=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var l=o;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("a1ec")},"0677":function(t,e,n){"use strict";n("239d")},"239d":function(t,e,n){},"297e":function(t,e,n){"use strict";n("98cd")},4902:function(t,e,n){"use strict";n("7e17")},"4a48":function(t,e,n){},"4b83":function(t,e,n){"use strict";n("941f")},"624a":function(t,e,n){},6298:function(t,e,n){},6539:function(t,e,n){"use strict";n("e146")},"6d98":function(t,e,n){"use strict";n("e742")},"727b":function(t,e,n){"use strict";n("9b18")},"7e17":function(t,e,n){},"7ed1":function(t,e,n){"use strict";n("df64")},"805d":function(t,e,n){"use strict";n("4a48")},9224:function(t){t.exports=JSON.parse('{"name":"witalk-imui","version":"1.7.3","main":"dist/index.umd.min.js","description":"基于 VUE2.0 的 IM 聊天组件","homepage":"http://june000.gitee.io/witalk-im/","keywords":["vue","im","chat","vueim","vuechat","webim","webchat"],"repository":{"type":"git","url":"git+https://github.com/fanjyy/witalk-imui.git"},"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build --target lib --name index src/index.js","build-demo":"vue-cli-service build --dest demo/dist demo/main.js","lint":"vue-cli-service lint"},"dependencies":{"vue":"2.6.14"},"devDependencies":{"@babel/eslint-parser":"^7.14.4","@vue/cli-plugin-babel":"^4.5.13","@vue/cli-plugin-eslint":"^4.5.13","@vue/cli-service":"^4.5.13","@vue/compiler-sfc":"^3.1.1","@webank/eslint-config-webank":"^0.3.0","less":"3.13.1","less-loader":"7.3.0","vue-template-compiler":"^2.5.21"},"author":"fanjun","license":"MIT"}')},9245:function(t,e,n){"use strict";n("c3ab")},"941f":function(t,e,n){},"98cd":function(t,e,n){},"9b18":function(t,e,n){},"9f29":function(t,e,n){"use strict";n("def5")},a1ca:function(t,e,n){},a1ec:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a,i,s=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"scroll-top",on:{click:t.scrollToTop}},[t._v("🚀")]),n("div",{staticClass:"logo"},[n("div",{staticClass:"logo-text"},[n("b",[t._v("Witalk")]),t._v(" IMUI"),n("span",{staticClass:"logo-badge"},[t._v(t._s(t.packageData.version))])]),n("div",{staticClass:"logo-sub"},[t._v(t._s(t.packageData.description))]),t._m(0),n("br"),t._m(1),t._m(2)]),n("div",{staticClass:"imui-center"},[n("witalk-imui",{ref:"IMUI",attrs:{user:t.user,contextmenu:t.contextmenu,"contact-contextmenu":t.contactContextmenu,theme:t.theme,"hide-menu":t.hideMenu,"hide-menu-avatar":t.hideMenuAvatar,"hide-message-name":t.hideMessageName,"hide-message-time":t.hideMessageTime},on:{"change-menu":t.handleChangeMenu,"change-contact":t.handleChangeContact,"pull-messages":t.handlePullMessages,"message-click":t.handleMessageClick,"menu-avatar-click":t.handleMenuAvatarClick,send:t.handleSend},scopedSlots:t._u([{key:"cover",fn:function(){return[n("div",{staticClass:"cover"},[n("i",{staticClass:"witalk-icon-message"}),n("p",[n("b",[t._v("自定义封面 Witalk")]),t._v(" IMUI")])])]},proxy:!0},{key:"message-title",fn:function(e){return[n("span",[t._v(t._s(e.displayName))]),n("small",{staticClass:"more",on:{click:function(n){return t.changeDrawer(e,t.$refs.IMUI)}}},[t._v(t._s(t.$refs.IMUI&&t.$refs.IMUI.drawerVisible?"关闭":"打开")+"抽屉")]),n("br")]}}])}),n("a",{staticStyle:{"font-size":"14px"},attrs:{target:"_blank",href:"https://codesandbox.io/s/sweet-chaplygin-s24mb?fontsize=14&hidenavigation=1&theme=dark"}},[t._v("在线编辑代码")]),n("div",{staticClass:"action"},[n("witalk-button",{on:{click:t.appendMessage}},[t._v("发送消息")]),n("witalk-button",{on:{click:t.appendEventMessage}},[t._v("发送 event 消息")]),n("witalk-button",{on:{click:t.removeMessage}},[t._v("删除最近一条消息")]),n("witalk-button",{on:{click:t.updateMessage}},[t._v("修改消息")]),n("witalk-button",{on:{click:t.appendCustomMessage}},[t._v("发送消息")]),n("br"),n("witalk-button",{on:{click:t.updateContact}},[t._v("修改联系人信息")]),n("witalk-button",{on:{click:t.changeMenuVisible}},[t._v("切换导航显示")]),n("witalk-button",{on:{click:t.changeMenuAvatarVisible}},[t._v(" 切换头像显示 ")]),n("witalk-button",{on:{click:t.changeMessageNameVisible}},[t._v(" 切换聊天窗口内名字显示 ")]),n("witalk-button",{on:{click:t.changeMessageTimeVisible}},[t._v(" 切换聊天窗口内时间显示 ")]),n("witalk-button",{on:{click:t.changeTheme}},[t._v(" 切换主题，当前主题："+t._s(t.theme)+" ")])],1)],1),n("div",{staticStyle:{display:"flex"}},[n("div",[n("div",{staticClass:"title"},[t._v("自定义")]),n("div",{staticClass:"imui-center"},[n("qq-imui",[t._v("12312312")])],1)]),n("div",{staticStyle:{margin:"0 55px"}},[n("div",{staticClass:"title"},[t._v("精简模式")]),n("div",{staticClass:"imui-center"},[n("witalk-imui",{ref:"SimpleIMUI",staticClass:"witalk-simple",attrs:{user:t.user,width:"340px","avatar-cricle":!0,simple:""},on:{"pull-messages":t.handlePullMessages,"message-click":t.handleMessageClick,send:t.handleSend}}),n("a",{staticStyle:{"font-size":"14px"},attrs:{target:"_blank",href:"https://codesandbox.io/s/witalk-imui-jingjianmoshi-forked-1lvoh?fontsize=14&hidenavigation=1&theme=dark"}},[t._v("在线编辑代码")])],1)])]),n("div",{staticClass:"title"},[t._v("联系人 Contact")]),t._m(3),n("div",{staticClass:"title"},[t._v("消息体 Message")]),t._m(4),n("div",{staticClass:"title"},[t._v("右键菜单 ContextmenuItem")]),t._m(5),n("div",{staticClass:"title"},[t._v("抽屉配置 DrawerOption")]),t._m(6),n("div",{staticClass:"title"},[t._v("组件属性")]),t._m(7),n("div",{staticClass:"title"},[t._v("组件方法")]),t._m(8),n("div",{staticClass:"title"},[t._v("组件插槽")]),t._m(9),n("div",{staticClass:"title"},[t._v("组件事件")]),t._m(10),n("div",{staticClass:"title",attrs:{id:"help1"}},[t._v("如何创建自定义消息？")]),n("div",[t._m(11),n("pre",[t._v('{\n  //值为 voice，用于解析的组件 name 必须为 WitalkMessageVoice\n  type: "voice",\n  content: \'语音消息\',\n  //自定义参数\n  params1:\'参数1\',\n  params2:\'参数2\',\n  //必传参数\n  id: "message-id",\n  //必传参数\n  fromUser:{\n    avatar: ""\n    displayName: "June"\n    id: "1"\n  },\n  //必传参数\n  sendTime: 1610872045162\n  //必传参数\n  status: "succeed"\n  //必传参数\n  toContactId: "contact-id"\n}\n        ')]),n("p",[t._v("创建用于解析该消息的组件。")]),n("pre",[t._v(t._s(t.tip))]),n("p",[t._v("IMUI初始化的时候，设置左侧联系人最新消息的渲染内容")]),n("pre",[t._v("IMUI.setLastContentRender('voice', message => {\n  return <span>[语音]</span>\n})\n")]),n("p",[t._v("最后一步，注册组件，必须使用全局注册的方式。")]),n("pre",[t._v("import Vue from 'vue';\nimport WitalkMessageVoice from './witalk-message-voice';\nVue.component(WitalkMessageVoice.name,WitalkMessageVoice);\n")]),n("p",[t._v("如果还有不明白的，可以到 demo/App.vue 查看示例代码")])]),n("div",{staticClass:"title",attrs:{id:"help2"}},[t._v("如何对接后端接口？")]),n("p",[t._v("1.初始化用户的信息")]),n("pre",{domProps:{textContent:t._s("data(){\n  return {\n    user:{id:1:displayName:'June',avatar:''}\n  }\n}")}}),n("pre",{domProps:{textContent:t._s("<witalk-imui :user='this.user' ref='IMUI'></witalk-imui>")}}),n("p",[t._v("2.初始化联系人数据")]),n("pre",{domProps:{textContent:t._s("mounted(){\n  const { IMUI } = this.$refs;\n  //初始化表情包。\n  IMUI.initEmoji(...);\n  //从后端请求联系人数据，包装成下面的样子\n  const contacts = [{\n    id: 2,\n    displayName: '丽安娜',\n    avatar:'',\n    index: 'L',\n    unread: 0,\n    //最近一条消息的内容，如果值为空，不会出现在“聊天”列表里面。\n    //lastContentRender 函数会将 file 消息转换为 '[文件]', image 消息转换为 '[图片]'，对 text 会将文字里的表情标识替换为img标签,\n    lastContent: IMUI.lastContentRender({type:'text',content:'你在干嘛呢？'})\n    //最近一条消息的发送时间\n    lastSendTime: 1566047865417,\n  }];\n  IMUI.initContacts(contacts);\n}")}}),n("p",[t._v("3.拉取消息列表")]),n("p",[t._v(" 现在刷新页面应该能够看到联系人了，但是点击联系人的话右边会一直处于加载中，这时需要监听 pull-messages 事件。 ")]),n("pre",{domProps:{textContent:t._s("<witalk-imui :user='this.user' ref='IMUI' @pull-messages='handlePullMessages'></witalk-imui>")}}),n("pre",{domProps:{textContent:t._s("methods:{\n  handlePullMessages(contact, next) {\n    //从后端请求消息数据，包装成下面的样子\n    const messages = [{\n      id: '唯一消息ID',\n      status: 'succeed',\n      type: 'text',\n      sendTime: 1566047865417,\n      content: '你什么才能对接完？',\n      toContactId: contact.id,\n      fromUser:this.user\n    }]\n    //将第二个参数设为true，表示已到末尾，聊天窗口顶部会显示“暂无更多消息”，不然会一直转圈。\n    next(messages,true);\n  },\n}")}}),n("p",[t._v("4.发送消息")]),n("p",[t._v("现在在消息框发送新消息会一直转圈，这时需要监听 send 事件。")]),n("pre",{domProps:{textContent:t._s("methods:{\n  handleSend(message, next, file) {\n    ... 调用你的消息发送业务接口\n\n    //执行到next消息会停止转圈，如果接口调用失败，可以修改消息的状态 next({status:'failed'});\n    next();\n  },\n}")}}),n("p",[t._v("5.接收消息")]),n("pre",{domProps:{textContent:t._s("mounted(){\n\nWebSocket.onmessage = function(event) {\n  //将接收到的数据包装成下面的样子\n  const data = {\n    id: '唯一消息ID',\n    status: 'succeed',\n    type: 'text',\n    sendTime: 1566047865417,\n    content: '马上就对接完了！',\n    toContactId: 2,\n    fromUser:{\n      //如果 id == this.user.id消息会显示在右侧，否则在左侧\n      id:2,\n      displayName:'丽安娜',\n      avatar:'',\n    }\n  };\n  IMUI.appendMessage(data);\n};\n\n}")}})])},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"link"},[n("span",[t._v("源码下载  ")]),n("a",{attrs:{target:"_blank",href:"https://github.com/fanjyy/witalk-imui"}},[t._v("Github")]),n("a",{attrs:{target:"_blank",href:"https://gitee.com/june000/witalk-im"}},[t._v("Gitee")]),n("a",{attrs:{target:"_blank",href:"https://qm.qq.com/cgi-bin/qm/qr?k=xzUa9CPYQ5KCNQ86h7ep4Z3TtkqJxRZE&jump_from=webapi"}},[t._v("QQ交流群：1081773406")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a",{staticStyle:{"font-size":"14px"},attrs:{href:"#help1"}},[t._v("1.如何创建自定义消息？")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a",{staticStyle:{"font-size":"14px"},attrs:{href:"#help2"}},[t._v("2.如何对接后端接口？")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table"},[n("tr",{staticClass:"table-head"},[n("th",[t._v("参数")]),n("th",[t._v("说明")]),n("th",[t._v("类型")]),n("th",[t._v("默认值")]),n("th",[t._v("示例")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("id")]),n("td",{attrs:{width:"350"}},[t._v("唯一ID")]),n("td",{attrs:{width:"150"}},[t._v("String/Number")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("displayName")]),n("td",[t._v("名称")]),n("td",[t._v("String")]),n("td",[t._v("-")]),n("td")]),n("tr"),n("tr",[n("td",[t._v("avatar")]),n("td",[t._v("头像")]),n("td",[t._v("String")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("index")]),n("td",[t._v(" 通讯录索引，传入字母或数字进行排序，索引可以显示自定义文字“[1]群组” ")]),n("td",[t._v("String")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("unread")]),n("td",[t._v("未读消息数")]),n("td",[t._v("Number")]),n("td",[t._v("0")]),n("td")]),n("tr",[n("td",[t._v("lastSendTime")]),n("td",[t._v("最近一条消息的时间戳，13位毫秒")]),n("td",[t._v("timestamp")]),n("td",[t._v("0")]),n("td")]),n("tr",[n("td",[t._v("lastContent")]),n("td",[t._v("最近一条消息的内容")]),n("td",[t._v("String | Vnode")]),n("td"),n("td")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table"},[n("tr",{staticClass:"table-head"},[n("th",[t._v("参数")]),n("th",[t._v("说明")]),n("th",[t._v("类型")]),n("th",[t._v("默认值")]),n("th",[t._v("示例")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("id")]),n("td",{attrs:{width:"350"}},[t._v("唯一ID")]),n("td",{attrs:{width:"150"}},[t._v("String/Number")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("status")]),n("td",[t._v("消息发送的状态：going | failed | succeed")]),n("td",[t._v("String")]),n("td",[t._v("-")]),n("td")]),n("tr"),n("tr",[n("td",[t._v("type")]),n("td",[t._v("消息类型：file | image | text | event")]),n("td",[t._v("String | Vnode")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("sendTime")]),n("td",[t._v("消息发送时间，13位毫秒")]),n("td",[t._v("timestamp")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("content")]),n("td",[t._v("消息内容，如果type=file，此属性表示文件的URL地址")]),n("td",[t._v("String")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("fileSize")]),n("td",[t._v("文件大小")]),n("td",[t._v("Number")]),n("td",[t._v("0")]),n("td")]),n("tr",[n("td",[t._v("fileName")]),n("td",[t._v("文件名称")]),n("td",[t._v("String")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("toContactId")]),n("td",[t._v("接收消息的联系人ID")]),n("td",[t._v("String | Number")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("fromUser")]),n("td",[t._v("消息发送人的信息")]),n("td",[t._v("Object")]),n("td",[t._v("-")]),n("td",[t._v('{id: "1",displayName: "测试",avatar: "url"};')])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table"},[n("tr",{staticClass:"table-head"},[n("th",[t._v("名称")]),n("th",[t._v("说明")]),n("th",[t._v("类型")]),n("th",[t._v("示例")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("text")]),n("td",{attrs:{width:"350"}},[t._v("显示文字")]),n("td",{attrs:{width:"150"}},[t._v("String")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("color")]),n("td",{attrs:{width:"350"}},[t._v("颜色")]),n("td",{attrs:{width:"150"}},[t._v("String")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("icon")]),n("td",{attrs:{width:"350"}},[t._v("图标 class")]),n("td",{attrs:{width:"150"}},[t._v("String")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("click")]),n("td",{attrs:{width:"350"}},[t._v("点击事件，调用hide方法隐藏右键菜单。")]),n("td",{attrs:{width:"150"}},[t._v("Function(e,instance,hide)")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("visible")]),n("td",{attrs:{width:"350"}},[t._v("是否显示的判断函数")]),n("td",{attrs:{width:"150"}},[t._v("Function(instance)")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("render")]),n("td",{attrs:{width:"350"}},[t._v(" 负责样式的渲染函数，使用render的时候text属性会失去作用，调用hide方法隐藏右键菜单。 ")]),n("td",{attrs:{width:"150"}},[t._v("Function(e,instance,hide)")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table"},[n("tr",{staticClass:"table-head"},[n("th",[t._v("名称")]),n("th",[t._v("说明")]),n("th",[t._v("类型")]),n("th",[t._v("示例")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("width")]),n("td",{attrs:{width:"350"}},[t._v("宽度，可以设置百分比")]),n("td",{attrs:{width:"150"}},[t._v("String | Number")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("height")]),n("td",{attrs:{width:"350"}},[t._v("高度，可以设置百分比")]),n("td",{attrs:{width:"150"}},[t._v("String | Number")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("offsetX")]),n("td",{attrs:{width:"350"}},[t._v("X偏移值，可以设置百分比")]),n("td",{attrs:{width:"150"}},[t._v("String | Number")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("offsetY")]),n("td",{attrs:{width:"350"}},[t._v("Y偏移值，可以设置百分比")]),n("td",{attrs:{width:"150"}},[t._v("String | Number")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("position")]),n("td",{attrs:{width:"350"}},[t._v("位置")]),n("td",{attrs:{width:"150"}},[t._v("right | rightInside | center")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table"},[n("tr",{staticClass:"table-head"},[n("th",[t._v("参数")]),n("th",[t._v("说明")]),n("th",[t._v("类型")]),n("th",[t._v("默认值")]),n("th",[t._v("示例")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("user")]),n("td",{attrs:{width:"350"}},[t._v("用户信息")]),n("td",{attrs:{width:"150"}},[t._v("Object")]),n("td",{attrs:{width:"100"}},[t._v("-")]),n("td",[t._v('{id: "1",displayName: "测试",avatar: "url"};')])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("width")]),n("td",{attrs:{width:"350"}},[t._v("宽度")]),n("td",{attrs:{width:"150"}},[t._v("String")]),n("td",{attrs:{width:"100"}},[t._v("850px")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("height")]),n("td",{attrs:{width:"350"}},[t._v("高度")]),n("td",{attrs:{width:"150"}},[t._v("String")]),n("td",{attrs:{width:"100"}},[t._v("580px")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("theme")]),n("td",{attrs:{width:"350"}},[t._v("主题")]),n("td",{attrs:{width:"150"}},[t._v("default | blue")]),n("td",{attrs:{width:"100"}},[t._v("default")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("theme")]),n("td",{attrs:{width:"350"}},[t._v("主题")]),n("td",{attrs:{width:"150"}},[t._v("default | blue")]),n("td",{attrs:{width:"100"}},[t._v("default")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("loadingText")]),n("td",{attrs:{width:"350"}},[t._v("消息加载文字")]),n("td",{attrs:{width:"150"}},[t._v("String | Function")]),n("td",{attrs:{width:"100"}}),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("loadendText")]),n("td",{attrs:{width:"350"}},[t._v("消息加载结束文字")]),n("td",{attrs:{width:"150"}},[t._v("String | Function")]),n("td",{attrs:{width:"100"}},[t._v("暂无更多消息")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("avatarCricle")]),n("td",{attrs:{width:"350"}},[t._v("使用圆形头像")]),n("td",{attrs:{width:"150"}},[t._v("Boolean")]),n("td",{attrs:{width:"100"}},[t._v("false")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("sendText")]),n("td",{attrs:{width:"350"}},[t._v("发送消息按钮的文字")]),n("td",{attrs:{width:"150"}},[t._v("String")]),n("td",{attrs:{width:"100"}},[t._v("发送消息")]),n("td")]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("sendKey")]),n("td",{attrs:{width:"350"}},[t._v("快捷发送键检查函数")]),n("td",{attrs:{width:"150"}},[t._v("Function(event)=>Boolean")]),n("td",{attrs:{width:"100"}}),n("td",[t._v("(e)=>e.keyCode == 13 && e.ctrlKey")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("simple")]),n("td",{attrs:{width:"350"}},[t._v("精简模式")]),n("td",{attrs:{width:"150"}},[t._v("Boolean")]),n("td",{attrs:{width:"100"}},[t._v("false")]),n("td",[t._v(" 精简模式下左侧的导航和联系人列表会隐藏，初始化时需要手动调用 changeContact 切换到聊天视图。 ")])]),n("tr",[n("td",[t._v("messageTimeFormat")]),n("td",[t._v("消息列表时间格式化函数")]),n("td",[t._v("Function(time)=>String")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("contactTimeFormat")]),n("td",[t._v("联系人时间格式化规则")]),n("td",[t._v("Function(time)=>String")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("hideDrawer")]),n("td",[t._v("是否隐藏抽屉")]),n("td",[t._v("Boolean")]),n("td",[t._v("true")]),n("td")]),n("tr",[n("td",[t._v("hideMenuAvatar")]),n("td",[t._v("是否隐藏导航头像")]),n("td",[t._v("Boolean")]),n("td",[t._v("false")]),n("td")]),n("tr",[n("td",[t._v("hideMenu")]),n("td",[t._v("是否隐藏左侧导航")]),n("td",[t._v("Boolean")]),n("td",[t._v("false")]),n("td")]),n("tr",[n("td",[t._v("hideMessageName")]),n("td",[t._v("是否隐藏聊天窗口内的联系人名字")]),n("td",[t._v("Boolean")]),n("td",[t._v("false")]),n("td")]),n("tr",[n("td",[t._v("hideMessageTime")]),n("td",[t._v("是否隐藏聊天窗口内的消息发送时间")]),n("td",[t._v("Boolean")]),n("td",[t._v("false")]),n("td")]),n("tr",[n("td",[t._v("contextmenu")]),n("td",[t._v("聊天消息右键菜单配置")]),n("td",[t._v("[ContextmenuItem]")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("contactContextmenu")]),n("td",[t._v("联系人右键菜单配置")]),n("td",[t._v("[ContextmenuItem]")]),n("td",[t._v("-")]),n("td")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table"},[n("tr",{staticClass:"table-head"},[n("th",[t._v("参数")]),n("th",[t._v("说明")]),n("th",[t._v("类型")]),n("th",[t._v("默认值")]),n("th",[t._v("示例")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("initMenus")]),n("td",{attrs:{width:"350"}},[t._v("初始化导航")]),n("td",{attrs:{width:"150"}},[t._v("Function([Object])")]),n("td",{attrs:{width:"100"}},[t._v('[ { name: "messages" }, { name: "contacts" }]')]),n("td",[t._v(' { name: "custom2", title: "自定义按钮2", unread: 0, click: () => { alert("拦截导航点击事件"); }, render: menu => { return \'...\'; }, isBottom: true } ')])]),n("tr",[n("td",[t._v("initContacts")]),n("td",[t._v("初始化联系人")]),n("td",[t._v("Function([Contact])")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("initEditorTools")]),n("td",[t._v("初始化工具栏")]),n("td",[t._v("Function([Object])")]),n("td",[t._v("[{name:'emoji'},{name:'uploadFile'},{name:'uploadImage'}]")]),n("td",[t._v(" [{ name:\"test2\", isRight:true, title:'上传 Excel', click:()=>{ alert('点击') }, render:()=>{ return '...' } }] ")])]),n("tr",[n("td",[t._v("initEmoji")]),n("td",[t._v("初始化表情数据")]),n("td",[t._v("Function([Object])")]),n("td",[t._v("-")]),n("td",[n("div",[t._v(" 有分类：[{ label: '默认表情', children: [ { name: '1f62c', title: '微笑', src: 'https://twemoji.maxcdn.com/2/72x72/1f62c.png' } ] }] ")]),n("div",[t._v(" 无分类：[{ name: '1f62c', title: '微笑', src: 'https://twemoji.maxcdn.com/2/72x72/1f62c.png' }] ")])])]),n("tr",[n("td",[t._v("appendMessage")]),n("td",[t._v(" 新增一条消息, 如果当前焦点在该联系人的聊天窗口，设置 scrollToBottom=true 添加之后自动定位到消息窗口底部 ")]),n("td",[t._v("Function(Message,scrollToBottom=false)")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("removeMessage")]),n("td",[t._v("删除聊天消息")]),n("td",[t._v("Function(Message.id)")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("updateMessage")]),n("td",[t._v(" 修改消息，根据 Message.id 查找聊天消息并覆盖传入的值（toContactId会被忽略） ")]),n("td",[t._v("Function(Message)")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("appendContact")]),n("td",[t._v("添加联系人")]),n("td",[t._v("Function(Contact)")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("removeContact")]),n("td",[t._v("删除联系人")]),n("td",[t._v("Function(Contact.id)")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("updateContact")]),n("td",[t._v("修改联系人，根据 Contact.id 查找联系人并覆盖传入的值")]),n("td",[t._v("Function(Contact)")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("clearMessages")]),n("td",[t._v(" 清空某个联系人的本地消息记录，重新切换到该联系人时会再次触发pull-messages事件，Contact.id为空则清空所有 ")]),n("td",[t._v("Function(Contact.id)=>Boolean")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("getMessages")]),n("td",[t._v("返回所有本地消息，传入 Contact.id 则只返回与该联系人的消息")]),n("td",[t._v("Function(Contact.id)=>[Message]")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("getCurrentContact")]),n("td",[t._v("返回当前聊天窗口的联系人信息")]),n("td",[t._v("Function()=>Contact")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("getCurrentMessages")]),n("td",[t._v("返回当前聊天窗口的所有消息")]),n("td",[t._v("Function()=>[Message]")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("getContacts")]),n("td",[t._v("返回所有本地联系人")]),n("td",[t._v("Function()=>[Contact]")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("openDrawer")]),n("td",[t._v("打开联系人右侧抽屉，vnode 为抽屉内容")]),n("td",[t._v("Function(vnode)")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("changeDrawer")]),n("td",[t._v("切换右侧抽屉显示/隐藏，vnode 为抽屉内容")]),n("td",[t._v("Function(DrawerOption)")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("closeDrawer")]),n("td",[t._v("关闭抽屉")]),n("td",[t._v("Function()")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("changeMenu")]),n("td",[t._v("切换左侧导航")]),n("td",[t._v("Function(Menu.name)")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("changeContact")]),n("td",[t._v("切换聊天窗口")]),n("td",[t._v("Function(Contact.id,instance)")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("messageViewToBottom")]),n("td",[t._v("将当前聊天窗口滚动到底部")]),n("td",[t._v("Function()")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("setLastContentRender")]),n("td",[t._v("设置左侧联系人最新消息的渲染函数")]),n("td",[t._v("Function(Message.type, (Message)=>vnode)")]),n("td",[t._v("-")]),n("td",[t._v(" setLastContentRender('image', message => { return "),n("span",[t._v("[最新图片]")]),t._v(" }) ")])]),n("tr",[n("td",[t._v("lastContentRender")]),n("td",[t._v("用来生成 Message.lastContent 需要的vnode结构。")]),n("td",[t._v("Function(Message)")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("setEditorValue")]),n("td",[t._v("设置编辑框内容")]),n("td",[t._v("Function(string)")]),n("td",[t._v("-")]),n("td")]),n("tr",[n("td",[t._v("getEditorValue")]),n("td",[t._v("获取编辑框内容")]),n("td",[t._v("Function()=>string")]),n("td",[t._v("-")]),n("td")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table"},[n("tr",{staticClass:"table-head"},[n("th",[t._v("插槽名")]),n("th",[t._v("说明")]),n("th",[t._v("参数")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("cover")]),n("td",{attrs:{width:"350"}},[t._v("初始化时的封面")]),n("td",{attrs:{width:"150"}},[t._v("-")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("editor-footer")]),n("td",{attrs:{width:"350"}},[t._v("消息输入框底部")]),n("td",{attrs:{width:"150"}},[t._v("-")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("message-title")]),n("td",{attrs:{width:"350"}},[t._v("消息列表的标题")]),n("td",{attrs:{width:"150"}},[t._v("Contact")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("message-after")]),n("td",{attrs:{width:"350"}},[t._v("每条消息的尾部")]),n("td",{attrs:{width:"150"}},[t._v("Message")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("sidebar-message")]),n("td",{attrs:{width:"350"}},[t._v("左侧最新消息列表插槽")]),n("td",{attrs:{width:"150"}},[t._v("Contact")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("sidebar-contact")]),n("td",{attrs:{width:"350"}},[t._v("左侧联系人列表插槽")]),n("td",{attrs:{width:"150"}},[t._v("Contact")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("sidebar-message-top")]),n("td",{attrs:{width:"350"}},[t._v("左侧最新消息列表的顶部，会随列表滚动")]),n("td",{attrs:{width:"150"}},[t._v("instance")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("sidebar-contact-top")]),n("td",{attrs:{width:"350"}},[t._v("左侧联系人列表的顶部，会随列表滚动")]),n("td",{attrs:{width:"150"}},[t._v("instance")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("sidebar-message-fixedtop")]),n("td",{attrs:{width:"350"}},[t._v("固定在左侧最新消息列表的顶部")]),n("td",{attrs:{width:"150"}},[t._v("instance")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("sidebar-contact-fixedtop")]),n("td",{attrs:{width:"350"}},[t._v("固定在左侧联系人列表的顶部")]),n("td",{attrs:{width:"150"}},[t._v("instance")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("contact-info")]),n("td",{attrs:{width:"350"}},[t._v("左侧联系人详细页")]),n("td",{attrs:{width:"150"}},[t._v("Contact")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("message-side")]),n("td",{attrs:{width:"350"}},[t._v("消息列表右侧")]),n("td",{attrs:{width:"150"}},[t._v("Contact")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table"},[n("tr",{staticClass:"table-head"},[n("th",[t._v("事件名")]),n("th",[t._v("说明")]),n("th",[t._v("参数")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("change-menu")]),n("td",{attrs:{width:"350"}},[t._v("当左侧导航选项卡切换的时候会触发该事件")]),n("td",{attrs:{width:"150"}},[t._v("Menu.name")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("menu-avatar-click")]),n("td",{attrs:{width:"350"}},[t._v("当左侧导航内的头像被点击时回触发该事件")]),n("td",{attrs:{width:"150"}},[t._v("Contact")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("change-contact")]),n("td",{attrs:{width:"350"}},[t._v("当左侧联系人点击时会触发该事件")]),n("td",{attrs:{width:"150"}},[t._v("Contact")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("pull-messages")]),n("td",{attrs:{width:"350"}},[t._v(" 当切换聊天对象或者聊天窗口滚动到顶部时会触发该事件，调用next方法结束loading状态，如果设置了isEnd=true，下次聊天窗口滚动到顶部将不会再触发该事件 ")]),n("td",{attrs:{width:"150"}},[t._v("Contact,next([Message],isEnd),instance")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("message-click")]),n("td",{attrs:{width:"350"}},[t._v("点击聊天窗口中的消息时会触发该事件")]),n("td",{attrs:{width:"150"}},[t._v("event,key,Message,instance")])]),n("tr",[n("td",{attrs:{width:"150"}},[t._v("send")]),n("td",{attrs:{width:"350"}},[t._v("当发送新消息时会触发该事件")]),n("td",{attrs:{width:"150"}},[t._v(" Message,Function(Message)：调用该函数完成消息发送，可以传入Message来改变消息内容，file：上传时的文件 ")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v(" Witalk-IMUI 目前内置了file、image、text、event四种消息类型，在实际应用当中肯定是不够的哦，咋办？没事的，我们继续往下see。"),n("br"),t._v("要创建消息首先要确定新消息的 Message 结构。 ")])}],o=n("2638"),d=n.n(o),l=n("5530"),u=(n("b0c0"),n("d3b7"),n("25f0"),{name:"WitalkMessageVoice",inject:["IMUI"],inheritAttrs:!1,render:function(){var t=arguments[0];return t("witalk-message-basic",d()([{class:"witalk-message-voice"},{props:Object(l["a"])({},this.$attrs)},{scopedSlots:{content:function(e){return t("span",[e.content," 🔈"])}}}]))}}),m=u,h=(n("6d98"),n("2877")),v=Object(h["a"])(m,a,i,!1,null,null,null),p=v.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("witalk-imui",{ref:"IMUI",staticClass:"witalk-slot",attrs:{theme:"blue",user:t.UserData,width:900,"avatar-cricle":"","hide-message-name":"","hide-message-time":""},on:{"pull-messages":t.handlePullMessages,"change-contact":t.handleChangeContact,send:t.handleSend,changeContact:t.handleChangeContact},scopedSlots:t._u([{key:"editor-footer",fn:function(){return[t._v(" 按 Enter 发送 ")]},proxy:!0}])})},g=[],_={id:1e3,avatar:"https://p.qqan.com/up/2018-4/15244505348390471.jpg",displayName:"野火。"},w=[{id:1,displayName:"像梦一样自由",avatar:"https://p.qqan.com/up/2020-2/2020022821001845128.jpg",index:"X",unread:0,lastSendTime:1566047865417,lastContent:"你开心吗"},{id:2,displayName:"梦醒时分、",avatar:"https://p.qqan.com/up/2021-1/20211301122243621.jpg",index:"M",unread:0,lastSendTime:1566047865417,lastContent:""},{id:3,displayName:"凌云",avatar:"https://p.qqan.com/up/2021-1/2021129102387841.jpg",index:"L",unread:0,lastSendTime:1566047865417,lastContent:""},{id:4,displayName:"小郭",avatar:"https://p.qqan.com/up/2021-1/2021122135507881.jpg",index:"X",unread:0,lastSendTime:1566047865417,lastContent:""},{id:5,displayName:"杨玉泉",avatar:"https://p.qqan.com/up/2021-1/20211211131598147.jpg",index:"Y",unread:0,lastSendTime:1566047865417,lastContent:""},{id:6,displayName:"森系Style",avatar:"https://p.qqan.com/up/2021-1/2021113104111220.jpg",index:"S",unread:0,lastSendTime:1566047865417,lastContent:""},{id:7,displayName:"霸王花",avatar:"https://p.qqan.com/up/2021-1/20211411391666.jpg",index:"B",unread:0,lastSendTime:1566047865417,lastContent:"你怎么还不睡呀？"},{id:8,displayName:"曾平",avatar:"https://p.qqan.com/up/2020-12/202012291044425822.jpg",index:"Z",unread:0,lastSendTime:1566047865417,lastContent:""},{id:9,displayName:"淡然",avatar:"https://p.qqan.com/up/2020-12/202012141813343503.jpg",index:"D",unread:0,lastSendTime:1566047865417,lastContent:""},{id:10,displayName:"叶子。",avatar:"https://p.qqan.com/up/2021-1/20211301122243621.jpg",index:"Y",unread:0,lastSendTime:1566047865417,lastContent:""},{id:11,displayName:"土豆",avatar:"https://p.qqan.com/up/2020-12/202012111157268739.jpg",index:"T",unread:0,lastSendTime:1566047865417,lastContent:""},{id:12,displayName:"清沫",avatar:"https://p.qqan.com/up/2020-12/202012415467996.jpg",index:"Q",unread:0,lastSendTime:1566047865417,lastContent:""},{id:13,displayName:"Witalk-imui交流群",avatar:"https://p.qqan.com/up/2020-11/20201127157109035.jpg",index:"L",isGroup:!0,unread:0,lastSendTime:1566047865417,lastContent:"这个咋处理啊？"},{id:14,displayName:"系统通知",avatar:"https://p.qqan.com/up/2020-6/2020061117234279854.jpg",index:"[1]系統通知",unread:0,lastSendTime:1566047865417,lastContent:"宁静致远通过了你的好友请求",renderContainer:function(){var t=this.$createElement;return t("div",{style:"padding:15px;"},[t("div",["宁静致远通过了你的好友请求"]),t("div",["宁静致远通过了你的好友请求"]),t("div",["宁静致远通过了你的好友请求"])])}},{id:15,displayName:"宁静致远。",avatar:"https://p.qqan.com/up/2020-6/2020060308522797777.jpg",index:"N",unread:0,lastSendTime:1566047865417,lastContent:""}],b=(n("7db0"),function(){return Math.random().toString(36).substr(-8)}),x=function(t){var e=w.find((function(e){return e.id===t}));return{id:e.id,avatar:e.avatar,displayName:e.displayName}},C={1:[{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"问你件事",toContactId:1,fromUser:_},{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"啥子。",toContactId:1,fromUser:x(1)},{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"为什么",toContactId:1,fromUser:_},{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"你穿了高跟鞋还这么矮",toContactId:1,fromUser:_},{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"因为我矮啊。[!1f600][!1f600][!1f600]",toContactId:1,fromUser:x(1)},{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"你开心吗",toContactId:1,fromUser:x(1)}],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[],11:[],12:[],13:[{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"我是测试时候看到的",toContactId:1,fromUser:x(4)},{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"上新版本了，玩玩",toContactId:1,fromUser:x(4)},{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"项目内没有搞这个",toContactId:1,fromUser:x(4)},{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"@awesome 最新的，不然哪有这功能",toContactId:1,fromUser:x(5)},{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"其实是跟你的遮罩层有冲突",toContactId:1,fromUser:x(4)},{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"自己修改index哈",toContactId:1,fromUser:_},{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"你们升级到最近版了吗？",toContactId:1,fromUser:x(6)},{id:b(),status:"succeed",type:"text",sendTime:1566047865417,content:"wo 现在用的142",toContactId:1,fromUser:x(7)}],14:[],15:[]},k=[{label:"表情",children:[{name:"1f600",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f600.png"},{name:"1f62c",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f62c.png"},{name:"1f601",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f601.png"},{name:"1f602",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f602.png"},{name:"1f923",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f923.png"},{name:"1f973",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f973.png"},{name:"1f603",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f603.png"},{name:"1f604",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f604.png"},{name:"1f605",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f605.png"},{name:"1f606",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f606.png"},{name:"1f607",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f607.png"},{name:"1f609",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f609.png"},{name:"1f60a",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f60a.png"},{name:"1f642",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f642.png"},{name:"1f643",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f643.png"},{name:"1263a",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/263a.png"},{name:"1f60b",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f60b.png"},{name:"1f60c",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f60c.png"},{name:"1f60d",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f60d.png"},{name:"1f970",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f970.png"},{name:"1f618",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f618.png"},{name:"1f617",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f617.png"},{name:"1f619",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f619.png"},{name:"1f61a",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f61a.png"},{name:"1f61c",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f61c.png"},{name:"1f92a",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f92a.png"},{name:"1f928",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f928.png"},{name:"1f9d0",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f9d0.png"},{name:"1f61d",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f61d.png"},{name:"1f61b",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f61b.png"},{name:"1f911",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f911.png"},{name:"1f913",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f913.png"},{name:"1f60e",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f60e.png"},{name:"1f929",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f929.png"},{name:"1f921",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f921.png"},{name:"1f920",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f920.png"},{name:"1f917",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f917.png"},{name:"1f60f",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f60f.png"},{name:"1f636",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f636.png"},{name:"1f610",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f610.png"},{name:"1f611",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f611.png"},{name:"1f612",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f612.png"},{name:"1f644",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f644.png"},{name:"1f914",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f914.png"},{name:"1f925",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f925.png"},{name:"1f92d",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f92d.png"},{name:"1f92b",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f92b.png"},{name:"1f92c",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f92c.png"},{name:"1f92f",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f92f.png"},{name:"1f633",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f633.png"},{name:"1f61e",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f61e.png"},{name:"1f61f",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f61f.png"},{name:"1f620",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f620.png"},{name:"1f621",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f621.png"}]},{label:"收藏",children:[{name:"1f62c",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f62c.png"},{name:"1f621",title:"微笑",src:"https://twemoji.maxcdn.com/2/72x72/1f621.png"}]}],y={name:"QqImui",components:{},data:function(){return{UserData:_}},computed:{},watch:{},created:function(){},mounted:function(){var t=this.$refs.IMUI;t.initContacts(w),t.initEmoji(k),t.changeContact(13)},methods:{openDrawer:function(t){var e=this.$createElement,n=this.$refs.IMUI,a={position:t,render:function(t){return e("div",{style:"padding:15px"},[e("h5",[t.displayName]),e("span",{on:{click:n.closeDrawer}},["关闭抽屉"])])}};"center"===t?(a.width="50%",a.height="50%"):"rightInside"===t&&(a.height="90%",a.offsetY="10%"),n.openDrawer(a)},handlePullMessages:function(t,e){setTimeout((function(){e(C[t.id],!0)}),3e3)},handleChangeContact:function(){},handleSend:function(t,e,n){console.log(t,e,n),setTimeout((function(){e()}),1e3)}},render:function(){var t=this,e=arguments[0],n={"message-title":function(n){return e("div",[e("div",{style:"display:flex;justify-content:space-between"},[e("span",[n.displayName]),e("span",{style:"font-size:12px;"},[e("span",["打开抽屉："]),e("span",{class:"cursor:pointer;",on:{click:function(){return t.openDrawer("right")}}},["右侧 |"," "]),e("span",{class:"cursor:pointer;",on:{click:function(){return t.openDrawer("rightInside")}}},["右侧内部 |"," "]),e("span",{class:"cursor:pointer;",on:{click:function(){return t.openDrawer("center")}}},["居中"])])]),n.isGroup&&e("div",{class:"slot-group-menu"},[e("span",["聊天"]),e("span",["公告"]),e("span",["相册"]),e("span",["文件"]),e("span",["活动"]),e("span",{directives:[{name:"witalk-contextmenu",value:[{text:"操作一",click:function(t,e,n){n()}},{text:"操作二"}],modifiers:{click:!0}}]},["设置(左键弹出菜单)"])])])},"sidebar-contact-fixedtop":function(){return e("div",{class:"slot-contact-fixedtop"},[e("input",{class:"slot-search",attrs:{placeholder:"搜索通讯录"}})])},"sidebar-message-top":function(){return e("div",{class:"slot-contact-fixedtop"},[e("input",{class:"slot-search",attrs:{placeholder:"搜索联系人"}})])},"editor-footer":function(){return"按 enter 发送"},"message-side":function(t){if(t.isGroup)return e("div",{class:"slot-group"},[e("div",{class:"slot-group-title"},["群通知"]),e("div",{class:"slot-group-notice"},["进群请改备注，格式，工作地点-姓名，请大家配合谢谢"]),e("div",{class:"slot-group-title"},["群成员"]),e("div",{class:"slot-group-panel"},[e("input",{class:"slot-search",attrs:{placeholder:"搜索群成员"}}),e("div",{class:"slot-group-member"},["河南-96-十里青山"]),e("div",{class:"slot-group-member"},["河南-96-十里青山"]),e("div",{class:"slot-group-member"},["河南-96-十里青山"]),e("div",{class:"slot-group-member"},["河南-96-十里青山"]),e("div",{class:"slot-group-member"},["河南-96-十里青山"]),e("div",{class:"slot-group-member"},["河南-96-十里青山"]),e("div",{class:"slot-group-member"},["河南-96-十里青山"]),e("div",{class:"slot-group-member"},["河南-96-十里青山"]),e("div",{class:"slot-group-member"},["河南-96-十里青山"]),e("div",{class:"slot-group-member"},["河南-96-十里青山"])])])}};return e("div",{class:"qq-witalk-imui"},[e("witalk-imui",d()([{class:"witalk-slot",attrs:{user:_,width:900,"avatar-cricle":!0,"hide-message-name":!0,"hide-message-time":!0},ref:"IMUI"},{on:{"pull-messages":this.handlePullMessages,"change-contact":this.handleChangeContact,send:this.handleSend}},{on:{changeContact:this.handleChangeContact},scopedSlots:n}]))])}},M=y,I=(n("6539"),Object(h["a"])(M,f,g,!1,null,null,null)),j=I.exports,S=n("9224");s["a"].component(p.name,p),s["a"].component(j.name,j);var T='export default {\n  //组件的name必须以WitalkMessage开头，后面跟上 Message.type\n  name: "WitalkMessageVoice",\n  inheritAttrs: false,\n  //如果需要使用父组件的方法，可以使用注入。\n  inject: ["IMUI"],\n  render() {\n    //witalk-message-basic 组件对气泡框、头像、事件等信息进行了公共的处理。\n    return (\n      <witalk-message-basic\n        class="witalk-message-voice"\n        props={{ ...this.$attrs }}\n        scopedSlots={{\n          content: props => {\n            //返回HTML结构\n            return <span>{props.content}&nbsp;🔈</span>\n          }\n        }}\n      />\n    );\n  }\n};\n<style lang="less">\n.witalk-message.witalk-message-voice {\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n.witalk-message.witalk-message-voice .witalk-message-content {\n    border: 2px solid #000;\n    font-size: 12px;\n    cursor: pointer;\n}\n.witalk-message.witalk-message-voice .witalk-message-content::before {\n    display: none;\n}\n</style>',$=function(){return(new Date).getTime()},U=function(){return Math.random().toString(36).substr(-8)},N=function(){return Math.random().toString(36).substr(2)},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return e||(e={id:"system",displayName:"系统测试",avatar:"http://upload.qqbodys.com/allimg/1710/1035512943-0.jpg"}),{id:U(),status:"succeed",type:"text",sendTime:$(),content:N(),toContactId:t,fromUser:e}},O={name:"app",data:function(){var t=this,e=this.$createElement;return{theme:"default",contactContextmenu:[{text:"删除该聊天",click:function(t,e,n){var a=e.IMUI,i=e.contact;a.updateContact({id:i.id,lastContent:null}),a.currentContactId===i.id&&a.changeContact(null),n()}},{text:"设置备注和标签"},{text:"投诉"},{icon:"witalk-icon-message",render:function(t,e,n){return t("div",{style:"display:flex;justify-content:space-between;align-items:center;width:130px"},[t("span",["加入黑名单"]),t("span",[t("input",{attrs:{type:"checkbox",id:"switch"}}),t("label",{attrs:{id:"switch-label",for:"switch"}},["Toggle"])])])}},{click:function(t,e,n){var a=e.IMUI,i=e.contact;a.removeContact(i.id),a.currentContactId===i.id&&a.changeContact(null),n()},color:"red",text:"删除好友"}],contextmenu:[{click:function(t,n,a){var i=n.IMUI,s=n.message,r={id:U(),type:"event",content:e("div",[e("span",["你撤回了一条消息"," ",e("span",{directives:[{name:"show",value:"text"===s.type}],style:"color:#333;cursor:pointer",attrs:{content:s.content},on:{click:function(){i.setEditorValue(t.target.getAttribute("content"))}}},["重新编辑"])])]),toContactId:s.toContactId,sendTime:$()};i.removeMessage(s.id),i.appendMessage(r,!0),a()},visible:function(e){return e.message.fromUser.id===t.user.id},text:"撤回消息"},{visible:function(e){return e.message.fromUser.id!==t.user.id},text:"举报"},{text:"转发"},{visible:function(t){return"text"===t.message.type},text:"复制文字"},{visible:function(t){return"image"===t.message.type},text:"下载图片"},{visible:function(t){return"file"===t.message.type},text:"下载文件"},{click:function(t,e,n){var a=e.IMUI,i=e.message;a.removeMessage(i.id),n()},icon:"witalk-icon-folder",color:"red",text:"删除"}],tip:T,packageData:S,hideMenuAvatar:!1,hideMenu:!1,hideMessageName:!1,hideMessageTime:!0,user:{id:"1",displayName:"June",avatar:""}}},mounted:function(){var t=this.$createElement,e={id:"contact-1",displayName:"工作协作群",avatar:"http://upload.qqbodys.com/img/weixin/20170804/ji5qxg1am5ztm.jpg",index:"[1]群组",unread:0,lastSendTime:1566047865417,lastContent:"2"},n={id:"contact-2",displayName:"自定义内容",avatar:"http://upload.qqbodys.com/img/weixin/20170807/jibfvfd00npin.jpg",click:function(t){t()},renderContainer:function(){return t("h1",{style:"text-indent:20px"},["自定义页面"])},lastSendTime:1345209465e3,lastContent:"12312",unread:2},a={id:"contact-3",displayName:"铁牛",avatar:"http://upload.qqbodys.com/img/weixin/20170803/jiq4nzrkrnd0e.jpg",index:"T",unread:32,lastSendTime:3,lastContent:"你好123"},i=this.$refs.IMUI;setTimeout((function(){i.changeContact("contact-1")}),500),i.setLastContentRender("event",(function(){return"[自定义通知内容]"}));var s=[Object(l["a"])({},e),Object(l["a"])({},n),Object(l["a"])({},a)];i.initContacts(s),i.initMenus([{name:"messages"},{name:"contacts"},{name:"custom1",title:"自定义按钮1",unread:0,render:function(){return t("i",{class:"witalk-icon-attah"})},renderContainer:function(){return t("div",{class:"article"},[t("ul",[t("li",{class:"article-item"},[t("h2",["人民日报谈网红带货：产品真的值得买吗？"])]),t("li",{class:"article-item"},["甘肃夏河县发生5.7级地震 暂未接到人员伤亡报告"]),t("li",{class:"article-item"},["北方多地风力仍强沙尘相伴,东北内蒙古等地迎雨雪"]),t("li",{class:"article-item"},["英货车案：越南警方采集疑死者家属DNA作比对"]),t("li",{class:"article-item"},["知名连锁咖啡店的蛋糕吃出活虫 曝光内幕太震惊"])]),t("witalk-contact",d()([{},{props:{contact:e}},{style:"margin:20px"}])),t("witalk-contact",d()([{},{props:{contact:a}},{style:"margin:20px"}]))])},isBottom:!0},{name:"custom2",title:"自定义按钮2",unread:0,click:function(){alert("拦截导航点击事件")},render:function(){return t("i",{class:"witalk-icon-group"})},isBottom:!0}]),i.initEditorTools([{name:"emoji"},{name:"uploadFile"},{name:"uploadImage"},{name:"test1",click:function(){i.$refs.editor.selectFile("application/vnd.ms-excel")},render:function(){return t("span",["Excel"])}},{name:"test1",click:function(){i.initEditorTools([{name:"uploadFile"},{name:"emoji"}])},render:function(){return t("span",["重制工具栏"])}},{name:"test2",isRight:!0,title:"上传 Excel",click:function(){alert("点击了 ··· ")},render:function(){return t("b",["···"])}}]),i.initEmoji(k),i.setLastContentRender("voice",(function(e){return t("span",["[语音]"])}));var r=this.$refs.SimpleIMUI;e.id="11",r.initContacts([e]),r.initEmoji(k),r.changeContact(e.id)},methods:{changeTheme:function(){this.theme="default"===this.theme?"blue":"default"},scrollToTop:function(){document.body.scrollIntoView()},handleMenuAvatarClick:function(){console.log("Event:menu-avatar-click")},handleMessageClick:function(t,e,n,a){console.log("点击了消息",t,e,n),"status"===e&&(a.updateMessage({id:n.id,status:"going",content:"正在重新发送消息..."}),setTimeout((function(){a.updateMessage({id:n.id,status:"succeed",content:"发送成功"})}),2e3))},changeMenuAvatarVisible:function(){this.hideMenuAvatar=!this.hideMenuAvatar},changeMenuVisible:function(){this.hideMenu=!this.hideMenu},changeMessageNameVisible:function(){this.hideMessageName=!this.hideMessageName},changeMessageTimeVisible:function(){this.hideMessageTime=!this.hideMessageTime},removeMessage:function(){var t=this.$refs.IMUI,e=t.getCurrentMessages(),n=e[e.length-1].id;e.length>0&&t.removeMessage(n)},updateMessage:function(){var t=this.$refs.IMUI,e=t.getCurrentMessages(),n=e[e.length-1];if(e.length>0){var a={id:n.id,status:"succeed",type:"file",fileName:"被修改成文件了.txt",fileSize:"4200000"};"event"===n.type&&(a.fromUser=this.user),t.updateMessage(a),t.messageViewToBottom()}},appendCustomMessage:function(){var t=this.$refs.IMUI,e={id:U(),status:"succeed",type:"voice",sendTime:$(),content:"语音消息",params1:"1",params2:"2",toContactId:"contact-1",fromUser:this.user};t.appendMessage(e,!0)},appendMessage:function(){var t=this.$refs.IMUI,e=(t.currentContact,E("contact-3"));e.fromUser=Object(l["a"])(Object(l["a"])({},e.fromUser),this.user),t.appendMessage(e,!0)},appendEventMessage:function(){var t=this.$createElement,e=this.$refs.IMUI,n={id:U(),type:"event",content:t("span",["邀请你加入群聊"," ",t("span",{style:"color:#333;cursor:pointer",on:{click:function(){return alert("OK")}}},["接受"])]),toContactId:"contact-3",sendTime:$()};e.appendMessage(n,!0)},updateContact:function(){this.$refs.IMUI.updateContact({id:"contact-3",unread:10,displayName:N(),lastSendTime:$(),lastContent:"修改昵称为随机字母"})},changeDrawer:function(t,e){var n=this.$createElement;e.changeDrawer({render:function(){return n("div",{class:"drawer-content"},[n("p",[n("b",["自定义抽屉"])]),n("p",[t.displayName])])}})},handleChangeContact:function(t,e){console.log("Event:change-contact"),e.updateContact({id:t.id,unread:0}),e.closeDrawer()},handleSend:function(t,e,n){console.log(t,e,n),setTimeout((function(){e()}),1e3)},handlePullMessages:function(t,e,n){var a=this,i={id:t.id,displayName:t.displayName,avatar:t.avatar};setTimeout((function(){var t=[E(n.currentContactId,a.user),E(n.currentContactId,i),E(n.currentContactId,a.user),E(n.currentContactId,i),E(n.currentContactId,a.user),E(n.currentContactId,a.user),E(n.currentContactId,i),Object(l["a"])(Object(l["a"])({},E(n.currentContactId,a.user)),{status:"failed"})],s=!1;n.getMessages(n.currentContactId).length+t.length>11&&(s=!0),e(t,s)}),500)},handleChangeMenu:function(){console.log("Event:change-menu")},openCustomContainer:function(){}}},F=O,D=(n("9f29"),Object(h["a"])(F,r,c,!1,null,null,null)),B=D.exports;n("159b"),n("a15b"),n("d81d"),n("99af"),n("07ac"),n("4d63"),n("ac1f");function L(t){return"[object Object]"===Object.prototype.toString.call(t)}function R(t){return"string"===typeof t}function V(t){return(new Date).getTime()-t<864e5}function q(t){return!t||(!(!Array.isArray(t)||0!==t.length)||!(!L(t)||0!==Object.values(t).length))}function A(t){return t&&"function"===typeof t}var P,W,z,H=n("1da1"),K=(n("96cf"),n("caad"),n("2532"),n("b64b"),[]),Y={hover:function(){},focus:function(t){var e=this;t.addEventListener("focus",(function(){e.changeVisible()})),t.addEventListener("blur",(function(){e.changeVisible()}))},click:function(t){var e=this;t.addEventListener("click",(function(t){t.stopPropagation(),at.hide(),e.changeVisible()}))},contextmenu:function(t){var e=this;t.addEventListener("contextmenu",(function(t){t.preventDefault(),e.changeVisible()}))}},J={name:"WitalkPopover",props:{trigger:{type:String,default:"click",validator:function(t){return Object.keys(Y).includes(t)}}},data:function(){return{popoverStyle:{},visible:!1}},computed:{},watch:{visible:function(t){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=6;break}return n.next=3,e.$nextTick();case 3:a=e.$slots.default[0].elm,i=e.$refs.popover,e.popoverStyle={top:"-".concat(i.offsetHeight+10,"px"),left:"".concat(a.offsetWidth/2-i.offsetWidth/2,"px")};case 6:case"end":return n.stop()}}),n)})))()}},created:function(){document.addEventListener("click",this._documentClickEvent),K.push(this.close)},mounted:function(){Y[this.trigger].call(this,this.$slots.default[0].elm)},destroyed:function(){document.removeEventListener("click",this._documentClickEvent)},methods:{_documentClickEvent:function(t){t.stopPropagation(),this.visible&&this.close()},changeVisible:function(){this.visible?this.close():this.open()},open:function(){this.closeAll(),this.visible=!0},closeAll:function(){K.forEach((function(t){return t()}))},close:function(){this.visible=!1}},render:function(){var t=arguments[0];return t("span",{style:"position:relative"},[t("transition",{attrs:{name:"witalk-slide-top"}},[this.visible&&t("div",{class:"witalk-popover",ref:"popover",style:this.popoverStyle,on:{click:function(t){return t.stopPropagation()}}},[t("div",{class:"witalk-popover-content"},[this.$slots.content]),t("div",{class:"witalk-popover-arrow"})])]),this.$slots.default])}},G=J,Q=(n("c065"),Object(h["a"])(G,P,W,!1,null,null,null)),X=Q.exports,Z=function(){z&&(z.style.display="none")},tt=function(){z&&(z.style.display="block")};document.addEventListener("click",(function(){Z()}));var et,nt,at={hide:Z,bind:function(t,e,n){t.addEventListener(e.modifiers.click?"click":"contextmenu",(function(t){if(!q(e.value)&&Array.isArray(e.value)){var a;e.modifiers.click&&t.stopPropagation(),t.preventDefault(),X.methods.closeAll();var i=[];e.modifiers.message?a=n.context:e.modifiers.contact&&(a=n.child),z||(z=document.createElement("div"),z.className="witalk-contextmenu",document.body.appendChild(z)),z.innerHTML=e.value.map((function(t){var e;if(e=A(t.visible)?t.visible(a):!t.visible||t.visible,e){i.push(t);var n=t.icon?'<i class="witalk-contextmenu-icon '.concat(t.icon,'"></i>'):"";return'<div style="color:'.concat(t.color,'" title="').concat(t.text,'" class="witalk-contextmenu-item">').concat(n,"<span>").concat(t.text,"</span></div>")}return""})).join(""),z.style.top="".concat(t.pageY,"px"),z.style.left="".concat(t.pageX,"px"),z.childNodes.forEach((function(t,e){var n=i[e],s=n.click;n.render;t.addEventListener("click",(function(t){t.stopPropagation(),A(s)&&s(t,a,Z)}))})),tt()}}))}},it={name:"WitalkTabs",props:{activeIndex:String},data:function(){return{active:this.activeIndex}},mounted:function(){this.active||(this.active=this.$slots["tab-pane"][0].data.attrs.index)},methods:{_handleNavClick:function(t){this.active=t}},render:function(){var t=this,e=arguments[0],n=[],a=[];return this.$slots["tab-pane"].map((function(i){var s=i.data.attrs,r=s.tab,c=s.index;return n.push(e("div",{class:"witalk-tabs-content-pane",directives:[{name:"show",value:t.active===c}]},[i])),a.push(e("div",{class:["witalk-tabs-nav-item",t.active===c&&"witalk-tabs-nav-item-active"],on:{click:function(){return t._handleNavClick(c)}}},[r])),!0})),e("div",{class:"witalk-tabs"},[e("div",{class:"witalk-tabs-content"},[n]),e("div",{class:"witalk-tabs-nav"},[a])])}},st=it,rt=(n("4b83"),Object(h["a"])(st,et,nt,!1,null,null,null)),ct=rt.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:["witalk-button","witalk-button-color-"+t.color],attrs:{disabled:t.disabled,type:"button"},on:{click:t._handleClick}},[t._t("default")],2)},dt=[],lt={name:"WitalkButton",props:{color:{type:String,default:"default"},disabled:Boolean},methods:{_handleClick:function(t){this.$emit("click",t)}}},ut=lt,mt=(n("fc9f"),Object(h["a"])(ut,ot,dt,!1,null,null,null)),ht=mt.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"witalk-badge"},[t._t("default"),t.count?n("span",{class:["witalk-badge-label",t.isDot&&"witalk-badge-label-dot"]},[t._v(t._s(t.label))]):t._e()],2)},pt=[],ft=(n("a9e3"),{name:"WitalkBadge",props:{count:[Number,Boolean],overflowCount:{type:Number,default:99}},computed:{isDot:function(){return!0===this.count},label:function(){return this.isDot?"":this.count>this.overflowCount?"".concat(this.overflowCount,"+"):this.count}},methods:{}}),gt=ft,_t=(n("9245"),Object(h["a"])(gt,vt,pt,!1,null,null,null)),wt=_t.exports,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{class:["witalk-avatar",{"witalk-avatar-circle":t.circle}],style:t.style,on:{click:t.onClickAvatar}},[t.imageFinishLoad||!t.src?n("i",{class:t.icon}):t._e(),n("img",{attrs:{src:t.src},on:{load:t._handleLoad}})])},xt=[],Ct={name:"WitalkAvatar",inject:["IMUI"],props:{src:String,icon:{type:String,default:"witalk-icon-people"},circle:{type:Boolean,default:function(){return!!this.IMUI&&this.IMUI.avatarCricle}},size:{type:Number,default:32}},data:function(){return{imageFinishLoad:!0}},computed:{style:function(){var t="".concat(this.size,"px");return{width:t,height:t,lineHeight:t,fontSize:"".concat(this.size/2,"px")}}},methods:{_handleLoad:function(){this.imageFinishLoad=!1},onClickAvatar:function(t){this.$emit("click",t)}}},kt=Ct,yt=(n("4902"),Object(h["a"])(kt,bt,xt,!1,null,null,null)),Mt=yt.exports,It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["witalk-contact",{"witalk-contact-name-center":t.simple}],attrs:{title:t.contact.displayName},on:{click:function(e){return t._handleClick(e,t.contact)}}},[t._t("default",(function(){return[n("witalk-badge",{staticClass:"witalk-contact-avatar",attrs:{count:t.simple?0:t.contact.unread}},[n("witalk-avatar",{attrs:{size:40,src:t.contact.avatar}})],1),n("div",{staticClass:"witalk-contact-inner"},[n("p",{staticClass:"witalk-contact-label"},[n("span",{staticClass:"witalk-contact-name"},[t._v(t._s(t.contact.displayName))]),t.simple?t._e():n("span",{staticClass:"witalk-contact-time"},[t._v(" "+t._s(t.timeFormat(t.contact.lastSendTime))+" ")])]),t.simple?t._e():n("p",{staticClass:"witalk-contact-content"},[t.isString(t.contact.lastContent)?n("span",{domProps:{innerHTML:t._s(t.contact.lastContent)}}):n("span",[t._v(t._s(t.contact.lastContent))])])])]}))],2)},jt=[];n("5319"),n("4de4"),n("b680");function St(t,e,n){return t?t(n):e}function Tt(t){return t<10?"0".concat(t):t}function $t(t,e){e||(e="y-m-d h:i:s"),t=t?new Date(t):new Date;for(var n=[t.getFullYear().toString(),Tt((t.getMonth()+1).toString()),Tt(t.getDate().toString()),Tt(t.getHours().toString()),Tt(t.getMinutes().toString()),Tt(t.getSeconds().toString())],a="ymdhis",i=0;i<n.length;i++)e=e.replace(a.charAt(i),n[i]);return e}function Ut(t){var e,n=new Date(t),a=new Date,i=function(t){return t.getFullYear()},s=function(t){return"".concat(t.getMonth()+1,"-").concat(t.getDate())},r=i(n),c=i(a);return e=r!==c?"y年m月d日 h:i":"".concat(r,"-").concat(s(n))==="".concat(c,"-").concat(s(a))?"h:i":"m月d日 h:i",$t(t,e)}function Nt(t,e){A(t)?t((function(){e()})):e()}function Et(t){return t.replace(/<.*?>/gi,"")}function Ot(t){return t.replace(/<(?!img).*?>/gi,"")}function Ft(t){if(null===t||""===t)return"0 Bytes";var e=["B","K","M","G","T","P","E","Z","Y"],n=0,a=parseFloat(t);n=Math.floor(Math.log(a)/Math.log(1024));var i=a/Math.pow(1024,n);return i=parseFloat(i.toFixed(2)),i+e[n]}function Dt(){var t=(new Date).getTime();window.performance&&"function"===typeof window.performance.now&&(t+=performance.now());var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}));return e}var Bt,Lt,Rt,Vt,qt,At,Pt,Wt,zt,Ht,Kt,Yt,Jt,Gt,Qt,Xt,Zt,te={name:"WitalkContact",components:{},inject:{IMUI:{from:"IMUI",default:function(){return this}}},props:{contact:Object,simple:Boolean,timeFormat:{type:Function,default:function(t){return $t(t,V(t)?"h:i":"y/m/d")}}},data:function(){return{isString:R}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{_renderInner:function(){var t=this.$createElement,e=this.contact;return[t("witalk-badge",{attrs:{count:this.simple?0:e.unread},class:"witalk-contact-avatar"},[t("witalk-avatar",{attrs:{size:40,src:e.avatar}})]),t("div",{class:"witalk-contact-inner"},[t("p",{class:"witalk-contact-label"},[t("span",{class:"witalk-contact-name"},[e.displayName]),!this.simple&&t("span",{class:"witalk-contact-time"},[this.timeFormat(e.lastSendTime)])]),!this.simple&&t("p",{class:"witalk-contact-content"},[R(e.lastContent)?t("span",d()([{},{domProps:{innerHTML:e.lastContent}}])):e.lastContent])])]},_handleClick:function(t,e){this.$emit("click",e)}},render:function(){var t=this,e=arguments[0];return e("div",{class:["witalk-contact",{"witalk-contact-name-center":this.simple}],attrs:{title:this.contact.displayName},on:{click:function(e){return t._handleClick(e,t.contact)}}},[St(this.$scopedSlots.default,this._renderInner(),this.contact)])}},ee=te,ne=(n("b476"),Object(h["a"])(ee,It,jt,!1,null,null,null)),ae=ne.exports,ie=(n("3ca3"),n("ddb0"),n("2b3d"),n("498a"),n("a630"),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"insertHTML";document.execCommand(e,!1,t)}),se=window.getSelection(),re=[],ce={name:"WitalkEditor",components:{},inject:{IMUI:{from:"IMUI",default:function(){return this}}},props:{tools:{type:Array,default:function(){return[]}},sendText:{type:String,default:"发 送"},sendKey:{type:Function,default:function(t){return 13===t.keyCode&&!0===t.ctrlKey}}},data:function(){return this.clipboardBlob=null,{clipboardUrl:"",submitDisabled:!0,proxyTools:[],accept:"",tipText:this.IMUI.$scopedSlots.editorFooter}},created:function(){var t=this;this.$scopedSlots=this.IMUI.$scopedSlots,this.tools&&this.tools.length>0?this.initTools(this.tools):this.initTools([{name:"emoji"},{name:"uploadFile"},{name:"uploadImage"}]),this.IMUI.$on("change-contact",(function(){t.closeClipboardImage()}))},mounted:function(){this.$scopedSlots=this.IMUI.$scopedSlots},methods:{closeClipboardImage:function(){this.clipboardUrl="",this.clipboardBlob=null},sendClipboardImage:function(){this.clipboardBlob&&(this.$emit("upload",this.clipboardBlob),this.closeClipboardImage())},initTools:function(t){var e=this,n=this.$createElement;if(t){var a=[{name:"emoji",title:"表情",click:null,render:function(){return n("i",{class:"witalk-icon-emoji"})}},{name:"uploadFile",title:"文件上传",click:function(){return e.selectFile("*")},render:function(){return n("i",{class:"witalk-icon-folder"})}},{name:"uploadImage",title:"图片上传",click:function(){return e.selectFile("image/*")},render:function(){return n("i",{class:"witalk-icon-image"})}}],i=[];if(Array.isArray(t)){var s={emoji:0,uploadFile:1,uploadImage:2},r=Object.keys(s);i=t.map((function(t){return r.includes(t.name)?Object(l["a"])(Object(l["a"])({},a[s[t.name]]),t):t}))}else i=a;this.proxyTools=i}},_saveLastRange:function(){Bt=se.getRangeAt(0)},_focusLastRange:function(){this.$refs.textarea.focus(),Bt&&(se.removeAllRanges(),se.addRange(Bt))},_handleClick:function(){this._saveLastRange()},_renderEmojiTabs:function(){var t=this,e=this.$createElement,n=function(n){return n.map((function(n){return e("img",{attrs:{src:n.src,title:n.title},class:"witalk-editor-emoji-item",on:{click:function(){return t._handleSelectEmoji(n)}}})}))};if(re[0].label){var a=re.map((function(t,a){return e("div",{slot:"tab-pane",attrs:{index:a,tab:t.label}},[n(t.children)])}));return e("witalk-tabs",{style:"width: 412px"},[a])}return e("div",{class:"witalk-tabs-content",style:"width:406px"},[n(re)])},_handleSelectEmoji:function(t){this._focusLastRange(),ie('<img emoji-name="'.concat(t.name,'" src="').concat(t.src,'"></img>')),this._checkSubmitDisabled(),this._saveLastRange()},selectFile:function(t){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.accept=t,n.next=3,e.$nextTick();case 3:e.$refs.fileInput.click();case 4:case"end":return n.stop()}}),n)})))()},_handlePaste:function(t){t.preventDefault();var e=t.clipboardData||window.clipboardData,n=e.getData("Text");if(n)window.clipboardData?this.$refs.textarea.innerHTML=n:ie(n,"insertText");else{var a=this._getClipboardBlob(e),i=a.blob,s=a.blobUrl;this.clipboardBlob=i,this.clipboardUrl=s}},_getClipboardBlob:function(t){for(var e,n,a=0;a<t.items.length;++a)"file"===t.items[a].kind&&-1!==t.items[a].type.indexOf("image/")&&(e=t.items[a].getAsFile(),n=(window.URL||window.webkitURL).createObjectURL(e));return{blob:e,blobUrl:n}},_handleKeyup:function(){this._saveLastRange(),this._checkSubmitDisabled()},_handleKeydown:function(t){!1===this.submitDisabled&&this.sendKey(t)&&this._handleSend()},getFormatValue:function(){return this.IMUI.emojiImageToName(this.$refs.textarea.innerHTML)},_checkSubmitDisabled:function(){this.submitDisabled=!Ot(this.$refs.textarea.innerHTML.trim())},_handleSend:function(){var t=this.getFormatValue();this.$emit("send",t),this.clear(),this._checkSubmitDisabled()},_handleChangeFile:function(){var t=this,e=this.$refs.fileInput;Array.from(e.files).forEach((function(e){t.$emit("upload",e)})),e.value=""},clear:function(){this.$refs.textarea.innerHTML=""},initEmoji:function(t){re=t,this.$forceUpdate()},setValue:function(t){this.$refs.textarea.innerHTML=this.IMUI.emojiNameToImage(t),this._checkSubmitDisabled()}},render:function(){var t=this,e=arguments[0],n=[],a=[];return this.proxyTools.forEach((function(i){var s=i.name,r=i.title,c=i.render,o=i.click,d=i.isRight;o=o||function(){};var l,u=["witalk-editor-tool-item",{"witalk-editor-tool-item-right":d}];l="emoji"===s?0===re.length?"":e("witalk-popover",{class:"witalk-editor-emoji"},[e("template",{slot:"content"},[t._renderEmojiTabs()]),e("div",{class:u,attrs:{title:r}},[c()])]):e("div",{class:u,on:{click:o},attrs:{title:r}},[c()]),d?a.push(l):n.push(l)})),e("div",{class:"witalk-editor"},[this.clipboardUrl&&e("div",{class:"witalk-editor-clipboard-image"},[e("img",{attrs:{src:this.clipboardUrl}}),e("div",[e("witalk-button",{style:{marginRight:"10px"},on:{click:this.closeClipboardImage},attrs:{color:"grey"}},["取消"]),e("witalk-button",{on:{click:this.sendClipboardImage}},["发送图片"])])]),e("input",{style:"display:none",attrs:{type:"file",multiple:"multiple",accept:this.accept},ref:"fileInput",on:{change:this._handleChangeFile}}),e("div",{class:"witalk-editor-tool"},[e("div",{class:"witalk-editor-tool-left"},[n]),e("div",{class:"witalk-editor-tool-right"},[a])]),e("div",{class:"witalk-editor-inner"},[e("div",{class:"witalk-editor-input",ref:"textarea",attrs:{contenteditable:"true",spellcheck:"false"},on:{keyup:this._handleKeyup,keydown:this._handleKeydown,paste:this._handlePaste,click:this._handleClick}})]),e("div",{class:"witalk-editor-footer"},[e("div",{class:"witalk-editor-tip"},[St(this.IMUI.$scopedSlots["editor-footer"],"使用 ctrl + enter 快捷发送消息")]),e("div",{class:"witalk-editor-submit"},[e("witalk-button",{attrs:{disabled:this.submitDisabled},on:{click:this._handleSend}},[this.sendText])])])])}},oe=ce,de=(n("a7e9"),Object(h["a"])(oe,Lt,Rt,!1,null,null,null)),le=de.exports,ue={name:"WitalkMessages",components:{},props:{hideName:Boolean,hideTime:Boolean,reverseUserId:[String,Number],timeRange:{type:Number,default:1},timeFormat:{type:Function,default:function(t){return Ut(t)}},loadingText:{type:[String,Function]},loadendText:{type:[String,Function],default:"暂无更多消息"},messages:{type:Array,default:function(){return[]}}},data:function(){return this._lockScroll=!1,{loading:!1,loadend:!1}},computed:{msecRange:function(){return 1e3*this.timeRange*60}},watch:{},created:function(){},mounted:function(){},methods:{loaded:function(){this.loadend=!0,this.$forceUpdate()},resetLoadState:function(){var t=this;this._lockScroll=!0,this.loading=!1,this.loadend=!1,setTimeout((function(){t._lockScroll=!1}),200)},_handleScroll:function(t){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e._lockScroll){n.next=2;break}return n.abrupt("return");case 2:if(a=t.target,at.hide(),0!==a.scrollTop||!1!==e.loading||!1!==e.loadend){n.next=10;break}return e.loading=!0,n.next=8,e.$nextTick();case 8:i=a.scrollHeight,e.$emit("reach-top",function(){var t=Object(H["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:a.scrollTop=a.scrollHeight-i,e.loading=!1,e.loadend=!!n;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 10:case"end":return n.stop()}}),n)})))()},scrollToBottom:function(){var t=this;return Object(H["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$nextTick();case 2:n=t.$refs.wrap,n&&(n.scrollTop=n.scrollHeight);case 4:case"end":return e.stop()}}),e)})))()}},render:function(){var t=this,e=arguments[0];return e("div",{class:"witalk-messages",ref:"wrap",on:{scroll:this._handleScroll}},[e("div",{class:["witalk-messages-load","witalk-messages-load-".concat(this.loadend?"end":"ing")]},[e("span",{class:"witalk-messages-loadend"},[R(this.loadendText)?this.loadendText:this.loadendText()]),e("span",{class:"witalk-messages-loading"},[this.loadingText?R(this.loadingText)?this.loadingText:this.loadingText():e("i",{class:"witalk-icon-loading witalk-anim-spin"})])]),this.messages.map((function(n,a){var i,s=[],r="witalk-message-".concat(n.type),c=t.messages[a-1];return c&&t.msecRange&&n.sendTime-c.sendTime>t.msecRange&&s.push(e("witalk-message-event",d()([{},{attrs:{message:{id:"__time__",type:"event",content:Ut(n.sendTime)}}}]))),i="event"===n.type?{message:n}:{timeFormat:t.timeFormat,message:n,reverse:t.reverseUserId===n.fromUser.id,hideTime:t.hideTime,hideName:t.hideName},s.push(e(r,d()([{ref:"message",refInFor:!0},{attrs:i}]))),s}))])}},me=ue,he=(n("b08a"),Object(h["a"])(me,Vt,qt,!1,null,null,null)),ve=he.exports,pe={name:"WitalkMessageBasic",inject:{IMUI:{from:"IMUI",default:function(){return this}}},props:{contextmenu:Array,message:{type:Object,default:function(){return{}}},timeFormat:{type:Function,default:function(){return""}},reverse:Boolean,hideName:Boolean,hideTime:Boolean},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{_emitClick:function(t,e){this.IMUI.$emit("message-click",t,e,this.message,this.IMUI)}},render:function(){var t=this,e=arguments[0],n=this.message,a=n.fromUser,i=n.status,s=n.sendTime,r=!0===this.hideName&&!0===this.hideTime;return e("div",{class:["witalk-message","witalk-message-status-".concat(i),{"witalk-message-reverse":this.reverse,"witalk-message-hide-title":r}]},[e("div",{class:"witalk-message-avatar"},[e("witalk-avatar",{attrs:{size:36,shape:"square",src:a.avatar},on:{click:function(e){t._emitClick(e,"avatar")}}})]),e("div",{class:"witalk-message-inner"},[e("div",{class:"witalk-message-title"},[!1===this.hideName&&e("span",{on:{click:function(e){t._emitClick(e,"displayName")}}},[a.displayName]),!1===this.hideTime&&e("span",{class:"witalk-message-time",on:{click:function(e){t._emitClick(e,"sendTime")}}},[this.timeFormat(s)])]),e("div",{class:"witalk-message-content-flex"},[e("div",{directives:[{name:"witalk-contextmenu",value:this.IMUI.contextmenu,modifiers:{message:!0}}],class:"witalk-message-content",on:{click:function(e){t._emitClick(e,"content")}}},[St(this.$scopedSlots.content,null,this.message)]),e("div",{class:"witalk-message-content-after"},[St(this.IMUI.$scopedSlots["message-after"],null,this.message)]),e("div",{class:"witalk-message-status",on:{click:function(e){t._emitClick(e,"status")}}},[e("i",{class:"witalk-icon-loading witalk-anim-spin"}),e("i",{class:"witalk-icon-prompt",attrs:{title:"重发消息"},style:{color:"#ff2525",cursor:"pointer"}})])])])])}},fe=pe,ge=(n("0677"),Object(h["a"])(fe,At,Pt,!1,null,null,null)),_e=ge.exports,we={name:"WitalkMessageText",inject:["IMUI"],inheritAttrs:!1,render:function(){var t=this,e=arguments[0];return e("witalk-message-basic",d()([{class:"witalk-message-text"},{props:Object(l["a"])({},this.$attrs)},{scopedSlots:{content:function(n){var a=t.IMUI.emojiNameToImage(n.content);return e("span",d()([{},{domProps:{innerHTML:a}}]))}}}]))}},be=we,xe=(n("805d"),Object(h["a"])(be,Wt,zt,!1,null,null,null)),Ce=xe.exports,ke={name:"WitalkMessageImage",inheritAttrs:!1,render:function(){var t=arguments[0];return t("witalk-message-basic",d()([{class:"witalk-message-image"},{props:Object(l["a"])({},this.$attrs)},{scopedSlots:{content:function(e){return t("img",{attrs:{src:e.content}})}}}]))}},ye=ke,Me=(n("297e"),Object(h["a"])(ye,Ht,Kt,!1,null,null,null)),Ie=Me.exports,je={name:"WitalkMessageFile",inheritAttrs:!1,render:function(){var t=arguments[0];return t("witalk-message-basic",d()([{class:"witalk-message-file"},{props:Object(l["a"])({},this.$attrs)},{scopedSlots:{content:function(e){return[t("div",{class:"witalk-message-file-inner"},[t("p",{class:"witalk-message-file-name"},[e.fileName]),t("p",{class:"witalk-message-file-byte"},[Ft(e.fileSize)])]),t("div",{class:"witalk-message-file-sfx"},[t("i",{class:"witalk-icon-attah"})])]}}}]))}},Se=je,Te=(n("7ed1"),Object(h["a"])(Se,Yt,Jt,!1,null,null,null)),$e=Te.exports,Ue={name:"WitalkMessageEvent",inject:["IMUI"],inheritAttrs:!1,methods:{_emitClick:function(t,e){this.IMUI.$emit("message-click",t,e,this.$attrs.message,this.IMUI)}},render:function(){var t=this,e=arguments[0],n=this.$attrs.message.content;return e("div",{class:"witalk-message witalk-message-event"},[e("span",{class:"witalk-message-event-content",on:{click:function(e){return t._emitClick(e,"content")}}},[n])])}},Ne=Ue,Ee=(n("e154"),Object(h["a"])(Ne,Gt,Qt,!1,null,null,null)),Oe=Ee.exports,Fe=n("2909"),De=(n("4e82"),n("2ca0"),n("c740"),n("a434"),"messages"),Be="contacts",Le=[De,Be],Re=n("d4ec"),Ve=n("bee2"),qe=function(){function t(){Object(Re["a"])(this,t),this.table={}}return Object(Ve["a"])(t,[{key:"get",value:function(t){return t?this.table[t]:this.table}},{key:"set",value:function(t,e){this.table[t]=e}},{key:"remove",value:function(t){t?delete this.table[t]:this.table={}}},{key:"has",value:function(t){return!!this.table[t]}}]),t}(),Ae={file:function(t){return"[文件]"},image:function(t){return"[图片]"},text:function(t){return this.emojiNameToImage(Et(t.content))},event:function(t){return"[通知]"}},Pe={},We={},ze=function(t){return R(t)?t:"".concat(t,"px")},He=function(t){return t.replace("%","")/100},Ke=function(){},Ye={name:"WitalkImui",provide:function(){return{IMUI:this}},props:{width:{type:[String,Number],default:850},height:{type:[String,Number],default:580},theme:{type:String,default:"default"},simple:{type:Boolean,default:!1},loadingText:[String,Function],loadendText:[String,Function],messageTimeFormat:Function,contactTimeFormat:Function,hideDrawer:{type:Boolean,default:!0},hideMenuAvatar:Boolean,hideMenu:Boolean,hideMessageName:Boolean,hideMessageTime:Boolean,sendKey:Function,sendText:String,contextmenu:Array,contactContextmenu:Array,avatarCricle:Boolean,user:{type:Object,default:function(){return{}}}},data:function(){return this.CacheContactContainer=new qe,this.CacheMenuContainer=new qe,this.CacheMessageLoaded=new qe,this.CacheDraft=new qe,{drawerVisible:!this.hideDrawer,currentContactId:null,currentMessages:[],activeSidebar:De,contacts:[],menus:[],editorTools:[]}},computed:{currentContact:function(){var t=this;return this.contacts.find((function(e){return e.id===t.currentContactId}))||{}},currentMenu:function(){var t=this;return this.menus.find((function(e){return e.name===t.activeSidebar}))||{}},currentIsDefSidebar:function(){return Le.includes(this.activeSidebar)},lastMessages:function(){var t=this.contacts.filter((function(t){return!q(t.lastContent)}));return t.sort((function(t,e){return e.lastSendTime-t.lastSendTime})),t}},watch:{activeSidebar:function(){}},created:function(){this.initMenus()},mounted:function(){var t=this;return Object(H["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$nextTick();case 2:case"end":return e.stop()}}),e)})))()},methods:{_menuIsContacts:function(){return this.activeSidebar===Be},_menuIsMessages:function(){return this.activeSidebar===De},_createMessage:function(t){return Object(l["a"])(Object(l["a"])({},{id:Dt(),type:"text",status:"going",sendTime:(new Date).getTime(),toContactId:this.currentContactId,fromUser:Object(l["a"])({},this.user)}),t)},appendMessage:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Pe[t.toContactId]){this._addMessage(t,t.toContactId,1);var n={id:t.toContactId,lastContent:this.lastContentRender(t),lastSendTime:t.sendTime};t.toContactId===this.currentContactId?(!0===e&&this.messageViewToBottom(),this.CacheDraft.remove(t.toContactId)):n.unread="+1",this.updateContact(n)}else this.updateContact({id:t.toContactId,unread:"+1",lastSendTime:t.sendTime,lastContent:this.lastContentRender(t)})},_emitSend:function(t,e,n){var a=this;this.$emit("send",t,(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:"succeed"};e(),a.updateMessage(Object.assign(t,n))}),n)},_handleSend:function(t){var e=this,n=this._createMessage({content:t});this.appendMessage(n,!0),this._emitSend(n,(function(){e.updateContact({id:n.toContactId,lastContent:e.lastContentRender(n),lastSendTime:n.sendTime}),e.CacheDraft.remove(n.toContactId)}))},_handleUpload:function(t){var e,n=this,a=["image/gif","image/jpeg","image/png"];e=a.includes(t.type)?{type:"image",content:URL.createObjectURL(t)}:{type:"file",fileSize:t.size,fileName:t.name,content:""};var i=this._createMessage(e);this.appendMessage(i,!0),this._emitSend(i,(function(){n.updateContact({id:i.toContactId,lastContent:n.lastContentRender(i),lastSendTime:i.sendTime})}),t)},_emitPullMessages:function(t){var e=this;this._changeContactLock=!0,this.$emit("pull-messages",this.currentContact,(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e._addMessage(n,e.currentContactId,0),e.CacheMessageLoaded.set(e.currentContactId,a),!0===a&&e.$refs.messages.loaded(),e.updateCurrentMessages(),e._changeContactLock=!1,t(a)}),this)},clearCacheContainer:function(t){this.CacheContactContainer.remove(t),this.CacheMenuContainer.remove(t)},_renderWrapper:function(t){var e=this.$createElement;return e("div",{style:{width:ze(this.width),height:ze(this.height)},ref:"wrapper",class:["witalk-wrapper","witalk-wrapper-theme-".concat(this.theme),{"witalk-wrapper-simple":this.simple},this.drawerVisible&&"witalk-wrapper-drawer-show"]},[t])},_renderMenu:function(){var t=this,e=this.$createElement,n=this._renderMenuItem();return e("div",{class:"witalk-menu",directives:[{name:"show",value:!this.hideMenu}]},[e("witalk-avatar",{directives:[{name:"show",value:!this.hideMenuAvatar}],on:{click:function(e){t.$emit("menu-avatar-click",e)}},class:"witalk-menu-avatar",attrs:{src:this.user.avatar}}),n.top,this.$slots.menu,e("div",{class:"witalk-menu-bottom"},[this.$slots["menu-bottom"],n.bottom])])},_renderMenuAvatar:function(){},_renderMenuItem:function(){var t=this,e=this.$createElement,n=[],a=[];return this.menus.forEach((function(i){var s=i.name,r=i.title,c=i.unread,o=i.render,d=i.click,l=e("div",{class:["witalk-menu-item",{"witalk-menu-item-active":t.activeSidebar===s}],on:{click:function(){Nt(d,(function(){s&&t.changeMenu(s)}))}},attrs:{title:r}},[e("witalk-badge",{attrs:{count:c}},[o(i)])]);!0===i.isBottom?a.push(l):n.push(l)})),{top:n,bottom:a}},_renderSidebarMessage:function(){var t=this;return this._renderSidebar([St(this.$scopedSlots["sidebar-message-top"],null,this),this.lastMessages.map((function(e){return t._renderContact({contact:e,timeFormat:t.contactTimeFormat},(function(){return t.changeContact(e.id)}),t.$scopedSlots["sidebar-message"])}))],De,St(this.$scopedSlots["sidebar-message-fixedtop"],null,this))},_renderContact:function(t,e,n){var a=this,i=this.$createElement,s=t.contact,r=s.click,c=s.renderContainer,o=s.id,l=function(){Nt(r,(function(){e(),a._customContainerReady(c,a.CacheContactContainer,o)}))};return i("witalk-contact",d()([{class:{"witalk-contact-active":this.currentContactId===t.contact.id},directives:[{name:"witalk-contextmenu",value:this.contactContextmenu,modifiers:{contact:!0}}]},{props:t},{on:{click:l},scopedSlots:{default:n}}]))},_renderSidebarContact:function(){var t,e=this,n=this.$createElement;return this._renderSidebar([St(this.$scopedSlots["sidebar-contact-top"],null,this),this.contacts.map((function(a){if(a.index){a.index=a.index.replace(/\[[0-9]*\]/,"");var i=[a.index!==t&&n("p",{class:"witalk-sidebar-label"},[a.index]),e._renderContact({contact:a,simple:!0},(function(){e.changeContact(a.id)}),e.$scopedSlots["sidebar-contact"])];return t=a.index,i}}))],Be,St(this.$scopedSlots["sidebar-contact-fixedtop"],null,this))},_renderSidebar:function(t,e,n){var a=this.$createElement;return a("div",{class:"witalk-sidebar",directives:[{name:"show",value:this.activeSidebar===e}],on:{scroll:this._handleSidebarScroll}},[a("div",{class:"witalk-sidebar-fixed-top"},[n]),a("div",{class:"witalk-sidebar-scroll"},[t])])},_renderDrawer:function(){var t=this.$createElement;return this._menuIsMessages()&&this.currentContactId?t("div",{class:"witalk-drawer",ref:"drawer"},[Ke(this.currentContact),St(this.$scopedSlots.drawer,"",this.currentContact)]):""},_isContactContainerCache:function(t){return t.startsWith("contact#")},_renderContainer:function(){var t=this,e=this.$createElement,n=[],a="witalk-container",i=this.currentContact,s=!0,r=this.CacheContactContainer.get();for(var c in r)if(Object.prototype.hasOwnProperty.call(r,c)){var o=i.id===c&&this.currentIsDefSidebar;s=!o,n.push(e("div",{class:a,directives:[{name:"show",value:o}]},[this.CacheContactContainer.get(c)]))}var d=this.CacheMenuContainer.get();for(var l in this.CacheMenuContainer.get())Object.prototype.hasOwnProperty.call(d,l)&&n.push(e("div",{class:a,directives:[{name:"show",value:this.activeSidebar===l&&!this.currentIsDefSidebar}]},[this.CacheMenuContainer.get(l)]));return n.push(e("div",{class:a,directives:[{name:"show",value:this._menuIsMessages()&&s&&i.id}]},[e("div",{class:"witalk-container-title"},[St(this.$scopedSlots["message-title"],e("div",{class:"witalk-container-displayname"},[i.displayName]),i)]),e("div",{class:"witalk-vessel"},[e("div",{class:"witalk-vessel-left"},[e("witalk-messages",{ref:"messages",attrs:{"loading-text":this.loadingText,"loadend-text":this.loadendText,"hide-time":this.hideMessageTime,"hide-name":this.hideMessageName,"time-format":this.messageTimeFormat,"reverse-user-id":this.user.id,messages:this.currentMessages},on:{"reach-top":this._emitPullMessages}}),e("witalk-editor",{ref:"editor",attrs:{tools:this.editorTools,sendText:this.sendText,sendKey:this.sendKey},on:{send:this._handleSend,upload:this._handleUpload}})]),e("div",{class:"witalk-vessel-right"},[St(this.$scopedSlots["message-side"],null,i)])])])),n.push(e("div",{class:a,directives:[{name:"show",value:!i.id&&this.currentIsDefSidebar}]},[this.$slots.cover])),n.push(e("div",{class:a,directives:[{name:"show",value:this._menuIsContacts()&&s&&i.id}]},[St(this.$scopedSlots["contact-info"],e("div",{class:"witalk-contact-info"},[e("witalk-avatar",{attrs:{src:i.avatar,size:90}}),e("h4",[i.displayName]),e("witalk-button",{on:{click:function(){q(i.lastContent)&&t.updateContact({id:i.id,lastContent:" "}),t.changeContact(i.id,De)}}},["发送消息"])]),i)])),n},_handleSidebarScroll:function(){at.hide()},_addContact:function(t,e){var n={0:"unshift",1:"push"}[e];this.contacts[n](t)},_addMessage:function(t,e,n){var a,i={0:"unshift",1:"push"}[n];Array.isArray(t)||(t=[t]),Pe[e]=Pe[e]||[],(a=Pe[e])[i].apply(a,Object(Fe["a"])(t))},setLastContentRender:function(t,e){Ae[t]=e},lastContentRender:function(t){return A(Ae[t.type])?Ae[t.type].call(this,t):(console.error("not found '".concat(t.type,"' of the latest message renderer,try to use ‘setLastContentRender()’")),"")},emojiNameToImage:function(t){return t.replace(/\[!(\w+)\]/gi,(function(t,e){var n=e;return We[n]?'<img emoji-name="'.concat(e,'" src="').concat(We[n],'" />'):"[!".concat(e,"]")}))},emojiImageToName:function(t){return t.replace(/<img emoji-name=\"([^\"]*?)\" [^>]*>/gi,"[!$1]")},updateCurrentMessages:function(){Pe[this.currentContactId]||(Pe[this.currentContactId]=[]),this.currentMessages=Pe[this.currentContactId]},messageViewToBottom:function(){this.$refs.messages.scrollToBottom()},setDraft:function(t,e){if(q(t)||q(e))return!1;var n=this.findContact(t),a=n.lastContent;if(q(n))return!1;this.CacheDraft.has(t)&&(a=this.CacheDraft.get(t).lastContent),this.CacheDraft.set(t,{editorValue:e,lastContent:a}),this.updateContact({id:t,lastContent:'<span style="color:red;">[草稿]</span><span>'.concat(this.lastContentRender({type:"text",content:e}),"</span>")})},clearDraft:function(t){var e=this.CacheDraft.get(t);if(e){var n=this.findContact(t).lastContent;0===n.indexOf('<span style="color:red;">[草稿]</span>')&&this.updateContact({id:t,lastContent:e.lastContent}),this.CacheDraft.remove(t)}},changeContact:function(t,e){var n=this;return Object(H["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=4;break}n.changeMenu(e),a.next=6;break;case 4:if(!n._changeContactLock&&n.currentContactId!==t){a.next=6;break}return a.abrupt("return",!1);case 6:if(n.currentContactId&&(i=Ot(n.getEditorValue()).trim(),i?(n.setDraft(n.currentContactId,i),n.setEditorValue()):n.clearDraft(n.currentContactId)),n.currentContactId=t,n.currentContactId){a.next=10;break}return a.abrupt("return",!1);case 10:if(n.$emit("change-contact",n.currentContact,n),!A(n.currentContact.renderContainer)&&n.activeSidebar!==Be){a.next=13;break}return a.abrupt("return");case 13:s=n.CacheDraft.get(t),s&&n.setEditorValue(s.editorValue),n.CacheMessageLoaded.has(t)?n.$refs.messages.loaded():n.$refs.messages.resetLoadState(),Pe[t]?setTimeout((function(){n.updateCurrentMessages(),n.messageViewToBottom()}),0):(n.updateCurrentMessages(),n._emitPullMessages((function(t){n.messageViewToBottom()})));case 17:case"end":return a.stop()}}),a)})))()},removeMessage:function(t){var e=this.findMessage(t);if(!e)return!1;var n=Pe[e.toContactId].findIndex((function(e){var n=e.id;return n===t}));return Pe[e.toContactId].splice(n,1),!0},updateMessage:function(t){if(!t.id)return!1;var e=this.findMessage(t.id);return!!e&&(e=Object.assign(e,t,{toContactId:e.toContactId}),!0)},forceUpdateMessage:function(t){if(t){var e=this.$refs.messages.$refs.message;if(e){var n=e.find((function(e){return e.$attrs.message.id===t}));n&&n.$forceUpdate()}}else this.$refs.messages.$forceUpdate()},_customContainerReady:function(t,e,n){A(t)&&!e.has(n)&&e.set(n,t.call(this))},changeMenu:function(t){this.$emit("change-menu",t),this.activeSidebar=t},initEmoji:function(t){var e=[];this.$refs.editor.initEmoji(t),t[0].label?t.forEach((function(t){var n;(n=e).push.apply(n,Object(Fe["a"])(t.children))})):e=t,e.forEach((function(t){var e=t.name,n=t.src;return We[e]=n}))},initEditorTools:function(t){this.editorTools=t,this.$refs.editor.initTools(t)},initMenus:function(t){var e=this,n=this.$createElement,a=[{name:De,title:"聊天",unread:0,click:null,render:function(){return n("i",{class:"witalk-icon-message"})},isBottom:!1},{name:Be,title:"通讯录",unread:0,click:null,render:function(){return n("i",{class:"witalk-icon-addressbook"})},isBottom:!1}],i=[];if(Array.isArray(t)){var s={messages:0,contacts:1},r=Object.keys(s);i=t.map((function(t){return r.includes(t.name)?Object(l["a"])(Object(l["a"])(Object(l["a"])({},a[s[t.name]]),t),{renderContainer:null}):(t.renderContainer&&e._customContainerReady(t.renderContainer,e.CacheMenuContainer,t.name),t)}))}else i=a;this.menus=i},initContacts:function(t){this.contacts=t,this.sortContacts()},sortContacts:function(){this.contacts.sort((function(t,e){if(t.index)return t.index.localeCompare(e.index)}))},appendContact:function(t){return q(t.id)||q(t.displayName)?(console.error("id | displayName cant be empty"),!1):(this.hasContact(t.id)||this.contacts.push(Object.assign({id:"",displayName:"",avatar:"",index:"",unread:0,lastSendTime:"",lastContent:""},t)),!0)},removeContact:function(t){var e=this.findContactIndexById(t);return-1!==e&&(this.contacts.splice(e,1),this.CacheDraft.remove(t),this.CacheMessageLoaded.remove(t),!0)},updateContact:function(t){var e=t.id;delete t.id;var n=this.findContactIndexById(e);if(-1!==n){var a=t.unread;R(a)&&(0!==a.indexOf("+")&&0!==a.indexOf("-")||(t.unread=parseInt(a)+parseInt(this.contacts[n].unread))),this.$set(this.contacts,n,Object(l["a"])(Object(l["a"])({},this.contacts[n]),t))}},findContactIndexById:function(t){return this.contacts.findIndex((function(e){return e.id===t}))},hasContact:function(t){return-1!==this.findContactIndexById(t)},findMessage:function(t){for(var e in Pe)if(Object.prototype.hasOwnProperty.call(Pe,e)){var n=Pe[e].find((function(e){var n=e.id;return n===t}));if(n)return n}},findContact:function(t){return this.getContacts().find((function(e){var n=e.id;return n===t}))},getContacts:function(){return this.contacts},getCurrentContact:function(){return this.currentContact},getCurrentMessages:function(){return this.currentMessages},setEditorValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!R(t))return!1;this.$refs.editor.setValue(this.emojiNameToImage(t))},getEditorValue:function(){return this.$refs.editor.getFormatValue()},clearMessages:function(t){return t?(delete Pe[t],this.CacheMessageLoaded.remove(t),this.CacheDraft.remove(t)):(Pe={},this.CacheMessageLoaded.remove(),this.CacheDraft.remove()),!0},getMessages:function(t){return(t?Pe[t]:Pe)||[]},changeDrawer:function(t){this.drawerVisible=!this.drawerVisible,!0===this.drawerVisible&&this.openDrawer(t)},openDrawer:function(t){Ke=A(t)?t:t.render||function(){};var e=this.$refs.wrapper.clientWidth,n=this.$refs.wrapper.clientHeight,a=t.width||200,i=t.height||n,s=t.offsetX||0,r=t.offsetY||0,c=t.position||"right";R(a)&&(a=e*He(a)),R(i)&&(i=n*He(i)),R(s)&&(s=e*He(s)),R(r)&&(r=n*He(r)),this.$refs.drawer.style.width="".concat(a,"px"),this.$refs.drawer.style.height="".concat(i,"px");var o=0,d=0,l="";"right"===c?o=e:"rightInside"===c?(o=e-a,l="-15px 0 16px -14px rgba(0,0,0,0.08)"):"center"===c&&(o=e/2-a/2,d=n/2-i/2,l="0 0 20px rgba(0,0,0,0.08)"),o+=s,d+=r+-1,this.$refs.drawer.style.top="".concat(d,"px"),this.$refs.drawer.style.left="".concat(o,"px"),this.$refs.drawer.style.boxShadow=l,this.drawerVisible=!0},closeDrawer:function(){this.drawerVisible=!1}},render:function(){return this._renderWrapper([this._renderMenu(),this._renderSidebarMessage(),this._renderSidebarContact(),this._renderContainer(),this._renderDrawer()])}},Je=Ye,Ge=(n("727b"),Object(h["a"])(Je,Xt,Zt,!1,null,null,null)),Qe=Ge.exports,Xe=(n("e900"),"1.4.2"),Ze=[Qe,ae,ve,le,Mt,wt,ht,X,ct,_e,Ce,Ie,$e,Oe],tn=function(t){t.directive("WitalkContextmenu",at),Ze.forEach((function(e){t.component(e.name,e)}))};"undefined"!==typeof window&&window.Vue&&tn(window.Vue);var en={version:Xe,install:tn};s["a"].use(en),s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(B)}}).$mount("#app")},a7e9:function(t,e,n){"use strict";n("624a")},b08a:function(t,e,n){"use strict";n("c356")},b476:function(t,e,n){"use strict";n("a1ca")},c065:function(t,e,n){"use strict";n("f98d")},c356:function(t,e,n){},c3ab:function(t,e,n){},def5:function(t,e,n){},df64:function(t,e,n){},e146:function(t,e,n){},e154:function(t,e,n){"use strict";n("6298")},e742:function(t,e,n){},e900:function(t,e,n){},e953:function(t,e,n){},f98d:function(t,e,n){},fc9f:function(t,e,n){"use strict";n("e953")}});